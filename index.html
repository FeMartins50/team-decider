<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Splitter</title>

    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Fredoka+One">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato">
    <link rel="stylesheet" href="./styles/main.css">
</head>
<body>
    <h1 id="titulo">Team <span>Splitter</span></h1>

    <div id="firstWrapper">
        <div class="container" id="jogadoresInputDiv"> <!-- Container Input Jogadores-->
            <h2>Jogadores:</h2>
            <div id="input">
                <div>
                    <h3>Nome:</h3>
                    <input type="text" id="playerInput" placeholder="Digite">
                </div>
                <div>
                    <h3>Força:</h3>
                    <input type="text" id="strengthInput" placeholder="Digite">
                </div>
                <button onclick="addPlayer()">Adicionar</button>
                <button onclick="split()">SPLIT</button>
            </div>
            <div class="box">
                <table id="tableInput">
                    <tr>
                      <th id="tableJogador">Jogadores</th>
                      <th id="tableForca">Força</th>
                    </tr>
                </table>
            </div>
        </div>
    
        <div id="containerTimes"> <!-- Container de todos os times -->
            <div class="container"> <!-- Container TIME ALPHA -->
                <h2>Time ALPHA</h2>
                <p>Força Média: 0</p>
                <p>Jogadores: 0</p>
                <div class="box">
                    <table id="tableAlpha">
                        <tr>
                          <th id="tableJogador">Jogadores</th>
                          <th id="tableForca">Força</th>
                        </tr>
                    </table>
                </div>
            </div>
        
            <div class="container"> <!-- Container TIME BRAVO -->
                <h2>Time BRAVO</h2>
                <p>Força Média: 0</p>
                <p>Jogadores: 0</p>
                <div class="box">
                    <table id="tableBravo">
                        <tr>
                          <th id="tableJogador">Jogadores</th>
                          <th id="tableForca">Força</th>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <script>
        const players = [];

        function addRowToTable (tableId, playerName, playerStrength) { // Parametros: tableId , playerName , playerStrength
            let tableInputBody = document.getElementById(tableId).children[0];
            let newRow = tableInputBody.insertRow(-1);
            // Insert a cell in the row at index 0
            let newCell0 = newRow.insertCell(0);
            // Append a text node to the cell
            newCell0.appendChild(document.createTextNode(playerName));
            // Insert a cell in the row at index 1
            let newCell1 = newRow.insertCell(1);
            // Append a text node to the cell
            newCell1.appendChild(document.createTextNode(playerStrength));
            // Remover cell do jogador ao clicar, e removê-lo do array players
            newRow.onclick = () => {
                let i = newRow.rowIndex;
                document.getElementById(tableId).deleteRow(i);
                players.splice(i-1,1);
            }
        }

        function addPlayer () {
            let player = document.getElementById("playerInput").value;
            let strength = document.getElementById("strengthInput").value;
            if (isNaN(strength) || !player || !strength) {
                return;
            }

            document.getElementById("playerInput").value = "";
            document.getElementById("strengthInput").value = "";
            players.push([player, strength]);
            addRowToTable("tableInput", player, strength);
        }
        
        function cleanTable (tableId) {
            let table = document.getElementById(tableId);
            for (let i = (table.rows.length - 1); i > 0; i--) {
                table.deleteRow(i);
            }
        }
    </script>
    <script>
        let tableInput = document.getElementById("tableInput");
        const alpha = [];
        const bravo = [];

        function split () {
            cleanTable("tableInput");
            cleanTable("tableAlpha");
            cleanTable("tableBravo");
            alpha.splice(0);
            bravo.splice(0);
            // Distribuir jogadores do array 'players' e aleatorizar os times
            let decider = true, player;
            while (players.length > 0) {
                [ player ] = players.splice(Math.floor(Math.random() * players.length), 1);
                if (decider) {
                    alpha.push(player);
                    decider = false;
                } else {
                    bravo.push(player);
                    decider = true;
                }
            }
            
            // Efetivamente colocar os jogadores dos arrays 'alpha' e 'bravo' nas 'table's do 'document'
            for (let [name, strength] of alpha) { // Alpha
                addRowToTable("tableAlpha", name, strength);
            }
            for (let [name, strength] of bravo) { // Bravo
                addRowToTable("tableBravo", name, strength);
            }
        }
    </script>
</body>
</html>